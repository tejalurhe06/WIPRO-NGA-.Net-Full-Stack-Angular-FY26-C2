<div class="card h-100 shadow-sm product-card">
  <img
  [src]="img(product.imageUrl)"
  (error)="hideImage($event)"
  class="card-img-top product-img"
  alt="{{ product.name }}"
/>


  <div class="card-body d-flex flex-column">
    <h6 class="card-title mb-1 text-truncate" title="{{ product.name }}">{{ product.name }}</h6>
    <p class="small text-muted flex-grow-1 clamp-2" title="{{ product.description }}">
      {{ product.description }}
    </p>

    <div class="d-flex justify-content-between align-items-center mt-1">
      <span class="fw-bold">â‚¹ {{ product.price | number:'1.2-2' }}</span>
      <span class="badge" [ngClass]="badgeClass(product.stockQuantity)">
        {{ stockLabel(product.stockQuantity) }}
      </span>
    </div>

    <div class="mt-2 d-flex gap-2">
      <button
        class="btn btn-sm btn-primary"
        [disabled]="product.stockQuantity === 0"
        (click)="onAddToCart()"
        title="Add to cart"
      >
        <i class="bi bi-cart-plus"></i>
      </button>

      <button
        class="btn btn-sm"
        [ngClass]="inWishlist ? 'btn-outline-danger' : 'btn-outline-secondary'"
        (click)="onWishlistClick()"
        [title]="inWishlist ? 'Remove from wishlist' : 'Add to wishlist'"
      >
        <i class="bi" [ngClass]="inWishlist ? 'bi-heart-fill' : 'bi-heart'"></i>
      </button>

      <a class="btn btn-sm btn-light ms-auto" [routerLink]="['/product', product.productId]">
        Details
      </a>
    </div>
  </div>
</div>
